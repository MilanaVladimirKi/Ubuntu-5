# Сортировка, объединение, разбиение и прочая обработка файлов.

## 1. Команда sort и ее опциии.

Команда sort выполняет сортировку входного потока по ключам сортировки. Она имеет следующий формат: sort [опции] [входные файлы] 

Опции команды sort: 

-c Проверка того, отсортирован ли файл; сортировка не производится. 

Пример sort и sort -c

![sort и sort -c](https://sun9-53.userapi.com/impg/3G4UIs5X6wikYA0NRjgVlILs895Bc4_2RCNOOA/CHBawLg3SiY.jpg?size=452x343&quality=95&sign=03090ea475622fd1007c814f36d23163&type=album)

-m Объединение отсортированных файлов; сортировка не производится. 

-u Удаление повторяющихся строк. 

-b Игнорирование начальных пробелов в полях сортировки. 

-n Включение режима числовой сортировки. 

-t используется для того, чтобы определить разделитель между полями. По умолчанию разделителем является пробел или символ табуляции. 

-r Сортировка в обратном порядке. 

Пример sort -r

![sort -r](https://sun9-48.userapi.com/impg/LGtFjI0Ok6n9jhXUCR_I0dMxltIaj_DiUq95fg/3giwPitFF-g.jpg?size=426x329&quality=95&sign=8d52d59faece6816b0ef3b7412987dbf&type=album)

-k сортировка по определенным полям. 

-n Включение режима числовой сортировки. 

Пример от положение -n не меняется результат: 

![-n](https://sun9-25.userapi.com/impg/xAzve9KRb62mpSPnATt1d8sYIahsuU4jxyYy7A/nxNKcl49gMs.jpg?size=511x342&quality=95&sign=88bdb0459ba8c382254b164015597b46&type=album)

-o Вывод результата не на экран, а в указанный файл. 
Чтобы сохранить результаты сортировки используется опция –o и указывается выходной файл. 

Пример однвременно несколько опций: 

![1](https://sun9-71.userapi.com/impg/awBTnc0CJPr3f9mmxwRt8rPN-IXZjZS1pUHwgg/sM5DD1-U2OY.jpg?size=512x350&quality=95&sign=7ae289860bf52a3b2c4d4f9d3ff8ae72&type=albumrl) 

## 2. Команда uniq и ее опции. 

Команда uniq применяется для удаления идущих подряд повторяющихся строк. Эту команду можно рассматривать как вариант опции –u команды sort. 
Однако, sort -u позволяет избавиться от всех одинаковых строк в файле, тогда как uniq обнаруживает повторяющиеся строки только тогда, когда они следуют одна за другой.

Формат команды uniq: uniq [Опции] ... [ВХОДНОЙ ФАЙЛ [ВЫХОДНОЙ ФАЙЛ]]

Опции команды uniq: 

-u Отображение только не повторяющихся строк.

-d Отображение одной копии каждой повторяющейся строки.

-c Удаление повторяющихся строк с выводом перед каждой из оставшихся строк числа повторений. 

-fn Игнорировать первые n полей. Полем считается последовательность непробельных символов, завершающаяся пробелом или табуляцией

Пример: 

![uniq](https://sun9-17.userapi.com/impg/6lwq0zF289AE1WVvdyaWPa1scyIV39R3sOyAIQ/4Z_HDlNIrjo.jpg?size=569x522&quality=95&sign=f927affbde4f59dfd57855ca0a2379ca&type=album)

## 3. Команда join и ее опции. 

Команда join выполняет соединение двух текстовых файлов на основании совпадения указанных полей. Ее действие напоминает операцию JOIN языка SQL. 

Команда работает следующим образом.

1) Каждый из двух входных файлов разбивается на поля, по умолчанию разделителем полей является пробел.
2) Из первого файла извлекается первая строка, а из нее – указанное поля (по умолчанию – первое поле).
3) Во втором файле ищется строка, имеющая такое же поле.
4) Найденная строка, из которой удаляется найденное поле, присоединяется к исходной строке и результат записывается в выходной поток.
5) Пункты 3 и 4 повторяются до тех пор, пока во втором файле есть строки с совпадающим полем.
6) Пункты 2 – 5 повторяются для каждой строки первого файла.

Таким образом, в выходной поток по умолчанию попадают только строки, имеющие общие компоненты. 
Важно: первый и второй файлы должны быть отсортирован по полям, по которым выполняется соединение.

Синтаксис команды: join [опции] файл1 файл2 

Наиболее часто используются опции: 

-a n Задает включение в выходной поток строк из файла n (n может быть 1 или 2), для которых не найдено ни одного совпадения по указанному полю.

-o формат Определяет формат выводимой строки. 

Параметр «формат» представляет собой разделенный запятыми или пробелами список спецификаций, каждая из которых имеет формат номер_файла.поле. 
По умолчанию используется следующий формат: 1 – поле, по которому производится объединение; 2 –  оставшаяся часть первой строки; 3 – оставшаяся часть второй строки.

-1 поле Объединять строки по указанному полю первого файла (по умолчанию – первое поле).

-2 поле Объединять строки по указанному полю второго файла (по умолчанию – первое поле).

-t Задает разделитель полей во входном и выходном потоке.

## 4. Команда cut и ее опции. 

Команда cut предназначена для вырезания (выделения) фрагментов строк из текстовых файлов или входного потока. Выделенный текст направляется в выходной поток. 

Синтаксис команды: cut OPTION... [FILE]... 

Опции команды cut

-c список Определяет, какие символы извлекаются из каждого входного файла

-f список Определяет, какие поля извлекаются из каждого входного файла

-d Задает разделитель полей 

Параметр список в опциях –c и –f представляет собой диапазон символов или полей, разделенных запятыми. 
Список может быть описан в одной из следующих форм: 

– n – в выходной поток включается кажды n-ый символ или поле каждой строки входного файла;

– n- – диапазон формируется от n-ого символа до окончания строки;
– n-m – диапазон от n-ого символа (или поля) включительно до m-ого символа (или поля) включительно;
– -m – диапазон от начала строки до m-ого символа включительно. 

Пример: 

![cut](https://sun9-49.userapi.com/impg/dysBvmAIxCaA_VErxEYrOK7_M4-BUsO9tMQF3g/4iGkSkJFss8.jpg?size=556x385&quality=95&sign=d2d37c95634c829bbbe6eb502d65f26f&type=album)

## 5. Команда paste и ее опции. 

Команда paste объединяет строки с одинаковыми номерами указанных файлов и возвращает объединенные строки в выходной поток.

Синтаксис команды: paste OPTION... [FILE]...

Опции команды paste 

-d список По умолчанию объединенные строки отделяются символом табуляции. 

Опция позволяет определить другой разделитель или список разделителей. В случае использования списка, его элементы используются циклически, то есть первый разделитель разделяет первое и второе поле, второй – второе и третье и т.д. Когда символы в списке завершаются, при разделении очередных полей снова используется первый символ.

-s Определяет режим последовательного слияния строк каждого входного файла по отдельности. 

При использовании опции –s команда paste выполняет слияние всех строк сначала первого файла, а затем второго. Таким образом, формируются столбцы из соответствующих по номерам строк каждого файла.

-Осуществляет выборку строки из входного потока. 

Пример

![paste](https://sun9-30.userapi.com/impg/0KeTyMMYCgilRcAQEh0l2hzPD-jmLLdZREwKVQ/P0S1qSXQyyE.jpg?size=564x547&quality=95&sign=10b0850feb8f4a990b3472601dcbd955&type=album)

## 6. Команда split и ее опции. 

Команда split предназначена для разделения больших файлов на более мелкие файлы. 

Команда split имеет следующий формат:

split [-размер_выходного_файла] входной_файл [префикс]
Первый параметр определяет количество строк, на которое необходимо разбить файл.

По умолчанию файл разбивается на фрагменты размером 1000 строк. Если размер разбиваемого файла не кратен 1000 строк, то последний файл будет содержать менее 1000 строк.
Например, из файла, содержащего 3100 строк, получатся три файла по 1000 строк в каждом и один файл из 100 строк. Имя каждого созданного файла представляется в формате от префикс[aa] до префикс[zz]. 
По умолчанию префиксом является символ «x». 
Таким образом, команда split создает следующую последовательность файлов: xaa, xab, ... xzy, xzz.
Если расположить файлы в алфавитном порядке и выполнить их последовательную конкатенацию (лат. concatenatio «присоединение цепями; сцепле́ние»), то получится исходный файл. 
